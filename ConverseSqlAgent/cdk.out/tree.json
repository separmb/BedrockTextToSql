{"version":"tree-0.1","tree":{"id":"App","path":"","children":{"ConverseText2SqlAgentStack":{"id":"ConverseText2SqlAgentStack","path":"ConverseText2SqlAgentStack","children":{"MyVpc":{"id":"MyVpc","path":"ConverseText2SqlAgentStack/MyVpc","children":{"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/MyVpc/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"ConverseText2SqlAgentStack/MyVpc"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.194.0"}},"PublicSubnetSubnet1":{"id":"PublicSubnetSubnet1","path":"ConverseText2SqlAgentStack/MyVpc/PublicSubnetSubnet1","children":{"Subnet":{"id":"Subnet","path":"ConverseText2SqlAgentStack/MyVpc/PublicSubnetSubnet1/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1a","cidrBlock":"10.0.0.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"PublicSubnet"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"ConverseText2SqlAgentStack/MyVpc/PublicSubnetSubnet1"}],"vpcId":{"Ref":"MyVpcF9F0CA6F"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.194.0"}},"Acl":{"id":"Acl","path":"ConverseText2SqlAgentStack/MyVpc/PublicSubnetSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.194.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ConverseText2SqlAgentStack/MyVpc/PublicSubnetSubnet1/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ConverseText2SqlAgentStack/MyVpc/PublicSubnetSubnet1"}],"vpcId":{"Ref":"MyVpcF9F0CA6F"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.194.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ConverseText2SqlAgentStack/MyVpc/PublicSubnetSubnet1/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"MyVpcPublicSubnetSubnet1RouteTable00654ADB"},"subnetId":{"Ref":"MyVpcPublicSubnetSubnet1Subnet60D1320D"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.194.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"ConverseText2SqlAgentStack/MyVpc/PublicSubnetSubnet1/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"MyVpcIGW5C4A4F63"},"routeTableId":{"Ref":"MyVpcPublicSubnetSubnet1RouteTable00654ADB"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.194.0"}},"EIP":{"id":"EIP","path":"ConverseText2SqlAgentStack/MyVpc/PublicSubnetSubnet1/EIP","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"ConverseText2SqlAgentStack/MyVpc/PublicSubnetSubnet1"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.194.0"}},"NATGateway":{"id":"NATGateway","path":"ConverseText2SqlAgentStack/MyVpc/PublicSubnetSubnet1/NATGateway","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["MyVpcPublicSubnetSubnet1EIP5C2C4ED5","AllocationId"]},"subnetId":{"Ref":"MyVpcPublicSubnetSubnet1Subnet60D1320D"},"tags":[{"key":"Name","value":"ConverseText2SqlAgentStack/MyVpc/PublicSubnetSubnet1"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.194.0","metadata":[]}},"PublicSubnetSubnet2":{"id":"PublicSubnetSubnet2","path":"ConverseText2SqlAgentStack/MyVpc/PublicSubnetSubnet2","children":{"Subnet":{"id":"Subnet","path":"ConverseText2SqlAgentStack/MyVpc/PublicSubnetSubnet2/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1b","cidrBlock":"10.0.1.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"PublicSubnet"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"ConverseText2SqlAgentStack/MyVpc/PublicSubnetSubnet2"}],"vpcId":{"Ref":"MyVpcF9F0CA6F"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.194.0"}},"Acl":{"id":"Acl","path":"ConverseText2SqlAgentStack/MyVpc/PublicSubnetSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.194.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ConverseText2SqlAgentStack/MyVpc/PublicSubnetSubnet2/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ConverseText2SqlAgentStack/MyVpc/PublicSubnetSubnet2"}],"vpcId":{"Ref":"MyVpcF9F0CA6F"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.194.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ConverseText2SqlAgentStack/MyVpc/PublicSubnetSubnet2/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"MyVpcPublicSubnetSubnet2RouteTableC647F413"},"subnetId":{"Ref":"MyVpcPublicSubnetSubnet2Subnet122ADB1B"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.194.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"ConverseText2SqlAgentStack/MyVpc/PublicSubnetSubnet2/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"MyVpcIGW5C4A4F63"},"routeTableId":{"Ref":"MyVpcPublicSubnetSubnet2RouteTableC647F413"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.194.0","metadata":[]}},"PrivateSubnetSubnet1":{"id":"PrivateSubnetSubnet1","path":"ConverseText2SqlAgentStack/MyVpc/PrivateSubnetSubnet1","children":{"Subnet":{"id":"Subnet","path":"ConverseText2SqlAgentStack/MyVpc/PrivateSubnetSubnet1/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1a","cidrBlock":"10.0.2.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"PrivateSubnet"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"ConverseText2SqlAgentStack/MyVpc/PrivateSubnetSubnet1"}],"vpcId":{"Ref":"MyVpcF9F0CA6F"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.194.0"}},"Acl":{"id":"Acl","path":"ConverseText2SqlAgentStack/MyVpc/PrivateSubnetSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.194.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ConverseText2SqlAgentStack/MyVpc/PrivateSubnetSubnet1/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ConverseText2SqlAgentStack/MyVpc/PrivateSubnetSubnet1"}],"vpcId":{"Ref":"MyVpcF9F0CA6F"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.194.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ConverseText2SqlAgentStack/MyVpc/PrivateSubnetSubnet1/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"MyVpcPrivateSubnetSubnet1RouteTableD918A34F"},"subnetId":{"Ref":"MyVpcPrivateSubnetSubnet1SubnetE8BD536C"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.194.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"ConverseText2SqlAgentStack/MyVpc/PrivateSubnetSubnet1/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"MyVpcPublicSubnetSubnet1NATGateway9744F529"},"routeTableId":{"Ref":"MyVpcPrivateSubnetSubnet1RouteTableD918A34F"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.194.0","metadata":[]}},"PrivateSubnetSubnet2":{"id":"PrivateSubnetSubnet2","path":"ConverseText2SqlAgentStack/MyVpc/PrivateSubnetSubnet2","children":{"Subnet":{"id":"Subnet","path":"ConverseText2SqlAgentStack/MyVpc/PrivateSubnetSubnet2/Subnet","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1b","cidrBlock":"10.0.3.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"PrivateSubnet"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"ConverseText2SqlAgentStack/MyVpc/PrivateSubnetSubnet2"}],"vpcId":{"Ref":"MyVpcF9F0CA6F"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.194.0"}},"Acl":{"id":"Acl","path":"ConverseText2SqlAgentStack/MyVpc/PrivateSubnetSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.194.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ConverseText2SqlAgentStack/MyVpc/PrivateSubnetSubnet2/RouteTable","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ConverseText2SqlAgentStack/MyVpc/PrivateSubnetSubnet2"}],"vpcId":{"Ref":"MyVpcF9F0CA6F"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.194.0"}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ConverseText2SqlAgentStack/MyVpc/PrivateSubnetSubnet2/RouteTableAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"MyVpcPrivateSubnetSubnet2RouteTable83C86AF7"},"subnetId":{"Ref":"MyVpcPrivateSubnetSubnet2SubnetE3BFCF91"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.194.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"ConverseText2SqlAgentStack/MyVpc/PrivateSubnetSubnet2/DefaultRoute","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"MyVpcPublicSubnetSubnet1NATGateway9744F529"},"routeTableId":{"Ref":"MyVpcPrivateSubnetSubnet2RouteTable83C86AF7"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.194.0","metadata":[]}},"IGW":{"id":"IGW","path":"ConverseText2SqlAgentStack/MyVpc/IGW","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ConverseText2SqlAgentStack/MyVpc"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.194.0"}},"VPCGW":{"id":"VPCGW","path":"ConverseText2SqlAgentStack/MyVpc/VPCGW","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"MyVpcIGW5C4A4F63"},"vpcId":{"Ref":"MyVpcF9F0CA6F"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.194.0"}},"RestrictDefaultSecurityGroupCustomResource":{"id":"RestrictDefaultSecurityGroupCustomResource","path":"ConverseText2SqlAgentStack/MyVpc/RestrictDefaultSecurityGroupCustomResource","children":{"Default":{"id":"Default","path":"ConverseText2SqlAgentStack/MyVpc/RestrictDefaultSecurityGroupCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.194.0","metadata":[]}},"DynamoDBEndpoint":{"id":"DynamoDBEndpoint","path":"ConverseText2SqlAgentStack/MyVpc/DynamoDBEndpoint","children":{"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/MyVpc/DynamoDBEndpoint/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ConverseText2SqlAgentStack/MyVpc"}],"routeTableIds":[{"Ref":"MyVpcPrivateSubnetSubnet1RouteTableD918A34F"},{"Ref":"MyVpcPrivateSubnetSubnet2RouteTable83C86AF7"}],"serviceName":{"Fn::Join":["",["com.amazonaws.",{"Ref":"AWS::Region"},".dynamodb"]]},"vpcEndpointType":"Gateway","vpcId":{"Ref":"MyVpcF9F0CA6F"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.GatewayVpcEndpoint","version":"2.194.0","metadata":[]}},"SecretsManagerEndpoint":{"id":"SecretsManagerEndpoint","path":"ConverseText2SqlAgentStack/MyVpc/SecretsManagerEndpoint","children":{"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/MyVpc/SecretsManagerEndpoint/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ConverseText2SqlAgentStack/MyVpc"}],"privateDnsEnabled":true,"securityGroupIds":[{"Fn::GetAtt":["SharedSecurityGroupA3C42D70","GroupId"]}],"serviceName":"com.amazonaws.us-east-1.secretsmanager","subnetIds":[{"Ref":"MyVpcPrivateSubnetSubnet1SubnetE8BD536C"},{"Ref":"MyVpcPrivateSubnetSubnet2SubnetE3BFCF91"}],"vpcEndpointType":"Interface","vpcId":{"Ref":"MyVpcF9F0CA6F"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.InterfaceVpcEndpoint","version":"2.194.0","metadata":[]}},"BedrockEndpoint":{"id":"BedrockEndpoint","path":"ConverseText2SqlAgentStack/MyVpc/BedrockEndpoint","children":{"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/MyVpc/BedrockEndpoint/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ConverseText2SqlAgentStack/MyVpc"}],"privateDnsEnabled":true,"securityGroupIds":[{"Fn::GetAtt":["SharedSecurityGroupA3C42D70","GroupId"]}],"serviceName":"com.amazonaws.us-east-1.bedrock-runtime","subnetIds":[{"Ref":"MyVpcPrivateSubnetSubnet1SubnetE8BD536C"},{"Ref":"MyVpcPrivateSubnetSubnet2SubnetE3BFCF91"}],"vpcEndpointType":"Interface","vpcId":{"Ref":"MyVpcF9F0CA6F"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.InterfaceVpcEndpoint","version":"2.194.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.194.0","metadata":[]}},"Custom::VpcRestrictDefaultSGCustomResourceProvider":{"id":"Custom::VpcRestrictDefaultSGCustomResourceProvider","path":"ConverseText2SqlAgentStack/Custom::VpcRestrictDefaultSGCustomResourceProvider","children":{"Staging":{"id":"Staging","path":"ConverseText2SqlAgentStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.194.0"}},"Role":{"id":"Role","path":"ConverseText2SqlAgentStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.194.0"}},"Handler":{"id":"Handler","path":"ConverseText2SqlAgentStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.194.0"}},"BastionHostSG":{"id":"BastionHostSG","path":"ConverseText2SqlAgentStack/BastionHostSG","children":{"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/BastionHostSG/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Allow SSH and HTTP","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":"3.83.200.219/32","ipProtocol":"tcp","fromPort":22,"toPort":22,"description":"Allow SSH"}],"vpcId":{"Ref":"MyVpcF9F0CA6F"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.194.0","metadata":[]}},"MyInstance":{"id":"MyInstance","path":"ConverseText2SqlAgentStack/MyInstance","children":{"InstanceRole":{"id":"InstanceRole","path":"ConverseText2SqlAgentStack/MyInstance/InstanceRole","children":{"ImportInstanceRole":{"id":"ImportInstanceRole","path":"ConverseText2SqlAgentStack/MyInstance/InstanceRole/ImportInstanceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.194.0","metadata":[]}},"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/MyInstance/InstanceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ec2.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"Name","value":"ConverseText2SqlAgentStack/MyInstance"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.194.0","metadata":[]}},"InstanceProfile":{"id":"InstanceProfile","path":"ConverseText2SqlAgentStack/MyInstance/InstanceProfile","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::InstanceProfile","aws:cdk:cloudformation:props":{"roles":[{"Ref":"MyInstanceInstanceRole1C4D4747"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnInstanceProfile","version":"2.194.0"}},"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/MyInstance/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Instance","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1a","iamInstanceProfile":{"Ref":"MyInstanceInstanceProfile2784C631"},"imageId":{"Ref":"SsmParameterValueawsserviceamiamazonlinuxlatestamzn2amikernel510hvmx8664gp2C96584B6F00A464EAD1953AFF4B05118Parameter"},"instanceType":"t3.micro","keyName":"separ-key-pair","networkInterfaces":[{"deviceIndex":"0","associatePublicIpAddress":true,"subnetId":{"Ref":"MyVpcPublicSubnetSubnet1Subnet60D1320D"},"groupSet":[{"Fn::GetAtt":["BastionHostSG7EC1B225","GroupId"]}]}],"tags":[{"key":"Name","value":"ConverseText2SqlAgentStack/MyInstance"}],"userData":{"Fn::Base64":"#!/bin/bash\nyum update -y\nsudo yum -y install mysql"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInstance","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Instance","version":"2.194.0","metadata":[]}},"SsmParameterValue:--aws--service--ami-amazon-linux-latest--amzn2-ami-kernel-5.10-hvm-x86_64-gp2:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter":{"id":"SsmParameterValue:--aws--service--ami-amazon-linux-latest--amzn2-ami-kernel-5.10-hvm-x86_64-gp2:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","path":"ConverseText2SqlAgentStack/SsmParameterValue:--aws--service--ami-amazon-linux-latest--amzn2-ami-kernel-5.10-hvm-x86_64-gp2:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.194.0"}},"SsmParameterValue:--aws--service--ami-amazon-linux-latest--amzn2-ami-kernel-5.10-hvm-x86_64-gp2:C96584B6-F00A-464E-AD19-53AFF4B05118":{"id":"SsmParameterValue:--aws--service--ami-amazon-linux-latest--amzn2-ami-kernel-5.10-hvm-x86_64-gp2:C96584B6-F00A-464E-AD19-53AFF4B05118","path":"ConverseText2SqlAgentStack/SsmParameterValue:--aws--service--ami-amazon-linux-latest--amzn2-ami-kernel-5.10-hvm-x86_64-gp2:C96584B6-F00A-464E-AD19-53AFF4B05118","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.194.0","metadata":[]}},"TEXT2SQLTable":{"id":"TEXT2SQLTable","path":"ConverseText2SqlAgentStack/TEXT2SQLTable","children":{"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/TEXT2SQLTable/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"id","keyType":"HASH"}],"tableName":"advtext2sql_memory_tb"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.194.0"}},"ScalingRole":{"id":"ScalingRole","path":"ConverseText2SqlAgentStack/TEXT2SQLTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.194.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.194.0","metadata":[]}},"DBSecret":{"id":"DBSecret","path":"ConverseText2SqlAgentStack/DBSecret","children":{"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/DBSecret/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"generateSecretString":{"excludePunctuation":true,"generateStringKey":"password","includeSpace":false,"secretStringTemplate":"{\"username\": \"admin\"}"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.194.0"}},"Attachment":{"id":"Attachment","path":"ConverseText2SqlAgentStack/DBSecret/Attachment","children":{"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/DBSecret/Attachment/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::SecretTargetAttachment","aws:cdk:cloudformation:props":{"secretId":{"Ref":"DBSecretD58955BC"},"targetId":{"Ref":"MyRDSInstance48FD439C"},"targetType":"AWS::RDS::DBInstance"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecretTargetAttachment","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.SecretTargetAttachment","version":"2.194.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.194.0","metadata":[]}},"DBSubnetGroup":{"id":"DBSubnetGroup","path":"ConverseText2SqlAgentStack/DBSubnetGroup","children":{"Default":{"id":"Default","path":"ConverseText2SqlAgentStack/DBSubnetGroup/Default","attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBSubnetGroup","aws:cdk:cloudformation:props":{"dbSubnetGroupDescription":"Subnet group for RDS database","subnetIds":[{"Ref":"MyVpcPrivateSubnetSubnet1SubnetE8BD536C"},{"Ref":"MyVpcPrivateSubnetSubnet2SubnetE3BFCF91"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBSubnetGroup","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.SubnetGroup","version":"2.194.0","metadata":[]}},"SharedSecurityGroup":{"id":"SharedSecurityGroup","path":"ConverseText2SqlAgentStack/SharedSecurityGroup","children":{"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/SharedSecurityGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for RDS and Lambda","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":{"Fn::GetAtt":["MyVpcF9F0CA6F","CidrBlock"]},"ipProtocol":"-1","description":"Allow all inbound traffic from VPC CIDR"},{"cidrIp":{"Fn::GetAtt":["MyVpcF9F0CA6F","CidrBlock"]},"ipProtocol":"tcp","fromPort":443,"toPort":443,"description":{"Fn::Join":["",["from ",{"Fn::GetAtt":["MyVpcF9F0CA6F","CidrBlock"]},":443"]]}}],"vpcId":{"Ref":"MyVpcF9F0CA6F"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.194.0"}},"from ConverseText2SqlAgentStackBastionHostSG598ADD54:3306":{"id":"from ConverseText2SqlAgentStackBastionHostSG598ADD54:3306","path":"ConverseText2SqlAgentStack/SharedSecurityGroup/from ConverseText2SqlAgentStackBastionHostSG598ADD54:3306","attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow all inbound traffic on port 3306 from bastion","fromPort":3306,"groupId":{"Fn::GetAtt":["SharedSecurityGroupA3C42D70","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["BastionHostSG7EC1B225","GroupId"]},"toPort":3306}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.194.0","metadata":[]}},"MyRDSInstance":{"id":"MyRDSInstance","path":"ConverseText2SqlAgentStack/MyRDSInstance","children":{"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/MyRDSInstance/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBInstance","aws:cdk:cloudformation:props":{"allocatedStorage":"20","copyTagsToSnapshot":true,"dbInstanceClass":"db.t3.micro","dbInstanceIdentifier":"myrdsdatabase","dbSubnetGroupName":{"Ref":"DBSubnetGroup"},"deleteAutomatedBackups":true,"deletionProtection":false,"engine":"mysql","masterUsername":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"DBSecretD58955BC"},":SecretString:username::}}"]]},"masterUserPassword":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"DBSecretD58955BC"},":SecretString:password::}}"]]},"maxAllocatedStorage":100,"multiAz":false,"publiclyAccessible":false,"storageType":"gp2","vpcSecurityGroups":[{"Fn::GetAtt":["SharedSecurityGroupA3C42D70","GroupId"]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBInstance","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseInstance","version":"2.194.0","metadata":[]}},"LambdaRole":{"id":"LambdaRole","path":"ConverseText2SqlAgentStack/LambdaRole","children":{"ImportLambdaRole":{"id":"ImportLambdaRole","path":"ConverseText2SqlAgentStack/LambdaRole/ImportLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.194.0","metadata":[]}},"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/LambdaRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.194.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ConverseText2SqlAgentStack/LambdaRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/LambdaRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["TEXT2SQLTable17335E23","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"DBSecretD58955BC"}},{"Action":"bedrock:InvokeModel","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LambdaRoleDefaultPolicy75625A82","roles":[{"Ref":"LambdaRole3A44B857"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.194.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.194.0","metadata":[]}},"psycopg2_final":{"id":"psycopg2_final","path":"ConverseText2SqlAgentStack/psycopg2_final","children":{"Code":{"id":"Code","path":"ConverseText2SqlAgentStack/psycopg2_final/Code","children":{"Stage":{"id":"Stage","path":"ConverseText2SqlAgentStack/psycopg2_final/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.194.0"}},"AssetBucket":{"id":"AssetBucket","path":"ConverseText2SqlAgentStack/psycopg2_final/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.194.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.194.0"}},"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/psycopg2_final/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"compatibleRuntimes":["python3.11"],"content":{"s3Bucket":"cdk-hnb659fds-assets-589528729908-us-east-1","s3Key":"91d798bf41fe886bb20bd9a15e75ef5b21ddd6bc73071fe02287e1bb790a3b71.zip"},"layerName":"layer_content"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.LayerVersion","version":"2.194.0","metadata":[]}},"SQLAgentFunction":{"id":"SQLAgentFunction","path":"ConverseText2SqlAgentStack/SQLAgentFunction","children":{"Code":{"id":"Code","path":"ConverseText2SqlAgentStack/SQLAgentFunction/Code","children":{"Stage":{"id":"Stage","path":"ConverseText2SqlAgentStack/SQLAgentFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.194.0"}},"AssetBucket":{"id":"AssetBucket","path":"ConverseText2SqlAgentStack/SQLAgentFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.194.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.194.0"}},"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/SQLAgentFunction/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-589528729908-us-east-1","s3Key":"eda65e351c5389d3a64e7eb3d5aa51189193c596ebfa2d23ef66298917fbf00a.zip"},"environment":{"variables":{"DynamoDbMemoryTable":{"Ref":"TEXT2SQLTable17335E23"},"BedrockModelId":"us.anthropic.claude-sonnet-4-20250514-v1:0"}},"ephemeralStorage":{"size":2048},"functionName":"sqlagent","handler":"lambda_function.lambda_handler","layers":[{"Ref":"psycopg2final5AA29775"}],"memorySize":1024,"role":{"Fn::GetAtt":["LambdaRole3A44B857","Arn"]},"runtime":"python3.11","timeout":900,"vpcConfig":{"subnetIds":[{"Ref":"MyVpcPrivateSubnetSubnet1SubnetE8BD536C"},{"Ref":"MyVpcPrivateSubnetSubnet2SubnetE3BFCF91"}],"securityGroupIds":[{"Fn::GetAtt":["SharedSecurityGroupA3C42D70","GroupId"]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.194.0","metadata":[]}},"Text2SqlAngularBucket":{"id":"Text2SqlAngularBucket","path":"ConverseText2SqlAgentStack/Text2SqlAngularBucket","children":{"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/Text2SqlAngularBucket/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketName":"text2sql-angular-app-589528729908-us-east-1","publicAccessBlockConfiguration":{"blockPublicAcls":false,"blockPublicPolicy":false,"ignorePublicAcls":false,"restrictPublicBuckets":false},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"aws-cdk:cr-owned:cbdd114b","value":"true"}],"websiteConfiguration":{"indexDocument":"index.html","errorDocument":"index.html"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.194.0"}},"Policy":{"id":"Policy","path":"ConverseText2SqlAgentStack/Text2SqlAngularBucket/Policy","children":{"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/Text2SqlAngularBucket/Policy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"Text2SqlAngularBucketC7D19EFE"},"policyDocument":{"Statement":[{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["Text2SqlAngularBucketC7D19EFE","Arn"]},"/*"]]}},{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["Text2SqlAngularBucketC7D19EFE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Text2SqlAngularBucketC7D19EFE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.194.0","metadata":[]}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"ConverseText2SqlAgentStack/Text2SqlAngularBucket/AutoDeleteObjectsCustomResource","children":{"Default":{"id":"Default","path":"ConverseText2SqlAgentStack/Text2SqlAngularBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.194.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.194.0","metadata":[]}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"ConverseText2SqlAgentStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","children":{"Staging":{"id":"Staging","path":"ConverseText2SqlAgentStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.194.0"}},"Role":{"id":"Role","path":"ConverseText2SqlAgentStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.194.0"}},"Handler":{"id":"Handler","path":"ConverseText2SqlAgentStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.194.0"}},"AngularAppDeployment":{"id":"AngularAppDeployment","path":"ConverseText2SqlAgentStack/AngularAppDeployment","children":{"AwsCliLayer":{"id":"AwsCliLayer","path":"ConverseText2SqlAgentStack/AngularAppDeployment/AwsCliLayer","children":{"Code":{"id":"Code","path":"ConverseText2SqlAgentStack/AngularAppDeployment/AwsCliLayer/Code","children":{"Stage":{"id":"Stage","path":"ConverseText2SqlAgentStack/AngularAppDeployment/AwsCliLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.194.0"}},"AssetBucket":{"id":"AssetBucket","path":"ConverseText2SqlAgentStack/AngularAppDeployment/AwsCliLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.194.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.194.0"}},"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/AngularAppDeployment/AwsCliLayer/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"content":{"s3Bucket":"cdk-hnb659fds-assets-589528729908-us-east-1","s3Key":"c82567645316e1499ecd064c937f1183bb4a74e95800ff64fab4d308451ba5f0.zip"},"description":"/opt/awscli/aws"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.lambda_layer_awscli.AwsCliLayer","version":"2.194.0","metadata":[]}},"CustomResourceHandler":{"id":"CustomResourceHandler","path":"ConverseText2SqlAgentStack/AngularAppDeployment/CustomResourceHandler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.194.0","metadata":[]}},"Asset1":{"id":"Asset1","path":"ConverseText2SqlAgentStack/AngularAppDeployment/Asset1","children":{"Stage":{"id":"Stage","path":"ConverseText2SqlAgentStack/AngularAppDeployment/Asset1/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.194.0"}},"AssetBucket":{"id":"AssetBucket","path":"ConverseText2SqlAgentStack/AngularAppDeployment/Asset1/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.194.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.194.0"}},"CustomResource":{"id":"CustomResource","path":"ConverseText2SqlAgentStack/AngularAppDeployment/CustomResource","children":{"Default":{"id":"Default","path":"ConverseText2SqlAgentStack/AngularAppDeployment/CustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.194.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_deployment.BucketDeployment","version":"2.194.0"}},"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C":{"id":"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C","path":"ConverseText2SqlAgentStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C","children":{"ServiceRole":{"id":"ServiceRole","path":"ConverseText2SqlAgentStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ConverseText2SqlAgentStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.194.0","metadata":[]}},"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.194.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ConverseText2SqlAgentStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":["arn:aws:s3:::cdk-hnb659fds-assets-589528729908-us-east-1","arn:aws:s3:::cdk-hnb659fds-assets-589528729908-us-east-1/*"]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Text2SqlAngularBucketC7D19EFE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Text2SqlAngularBucketC7D19EFE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF","roles":[{"Ref":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.194.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.194.0","metadata":[]}},"Code":{"id":"Code","path":"ConverseText2SqlAgentStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code","children":{"Stage":{"id":"Stage","path":"ConverseText2SqlAgentStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.194.0"}},"AssetBucket":{"id":"AssetBucket","path":"ConverseText2SqlAgentStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.194.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.194.0"}},"Resource":{"id":"Resource","path":"ConverseText2SqlAgentStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-589528729908-us-east-1","s3Key":"9a1fcb4a7ecba81ad70e9d3fb241f6794497da945dae5f25924e4dd002b65f2d.zip"},"environment":{"variables":{"AWS_CA_BUNDLE":"/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem"}},"handler":"index.handler","layers":[{"Ref":"AngularAppDeploymentAwsCliLayer3D59B2D3"}],"role":{"Fn::GetAtt":["CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265","Arn"]},"runtime":"python3.11","timeout":900}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.194.0","metadata":[]}},"CDKMetadata":{"id":"CDKMetadata","path":"ConverseText2SqlAgentStack/CDKMetadata","children":{"Default":{"id":"Default","path":"ConverseText2SqlAgentStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.194.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ConverseText2SqlAgentStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.194.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ConverseText2SqlAgentStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.194.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.194.0"}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}}},"constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.194.0"}}}